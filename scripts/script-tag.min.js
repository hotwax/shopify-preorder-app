!function(){let e,r,t,a;function n(){location.pathname.includes("products")&&(r=e("#hc_preorderButton, .hc_preorderButton").html())}this.preOrderCustomConfig={enableCartRedirection:!0};async function i(){if(location.pathname.includes("products")){const n=e("form[action='/cart/add']").serializeArray().find(e=>"id"===e.name).value,i=e("#hc_preorderButton, .hc_preorderButton");let d="",o=e("#hc_preordershipsfrom"),l=e("#hc_preordershipsfrom span");if(o.css("visibility","hidden"),i.html(r),i.off("click",c),i.siblings().css("display","block"),!await new Promise(function(r,t){e.getJSON(`${window.location.pathname}.js`,function(e){(e.tags.includes("Pre-Order")||e.tags.includes("Back-Order"))&&r(e),t(!1)})}).then(e=>(d=e.tags.includes("Pre-Order")?"Pre-Order":e.tags.includes("Back-Order")?"Back-Order":"",e.variants.find(e=>e.id==n).available)).catch(e=>e))return;const s=e("input[id='hc_backOrderDate']").val(),p=e("input[id='hc_preOrderDate']").val();t="Pre-Order"===d?p:"Back-Order"===d&&s,i.siblings().css("display","none"),a="Pre-Order"===d?"Pre Order":"Back-Order"===d&&"Back Order",i.html(a),o.length>0&&l.html(`${t}`),t&&o.css("visibility","visible"),i.on("click",c)}else e("input[id='hc_tags']").map(async function(r,t){const a=e(t);if(a.val().includes("Pre-Order")||a.val().includes("Back-Order")){const e=a.siblings("input[id=hc_backOrderDate]").val(),r=a.siblings("input[id=hc_preOrderDate]").val(),t=a.siblings("input[id=hc_continueSelling]").val(),n=a.val().includes("Pre-Order")?"Pre-Order":a.val().includes("Back-Order")&&"Back-Order";if(t&&"true"==t){const t=a.siblings("#hc_preorderButton"),i=a.parent(),c="Pre-Order"===n?r:"Back-Order"===n&&e,o="Pre-Order"===n?"Pre Order":"Back-Order"===n&&"Back Order";t.val(o),t.on("click",{cartForm:i,label:o,date:c},d)}}})}function d(r){r.preventDefault(),r.stopImmediatePropagation();let t=e(`<input id="pre-order-item" name="properties[Note]" value="${r.data.label}" type="hidden"/>`),a=e(`<input id="pre-order-item" name="properties[PROMISE_DATE]" value="${r.data.date}" type="hidden"/>`);r.data.cartForm.append(t),r.data.date&&r.data.cartForm.append(a),e.ajax({type:"POST",url:"/cart/add.js",data:r.data.cartForm.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),t.remove(),r.data.date&&a.remove()}function c(r){let n=e("form[action='/cart/add']");r.preventDefault(),r.stopImmediatePropagation();let i=e(`<input id="pre-order-item" name="properties[Note]" value="${a}" type="hidden"/>`),d=e(`<input id="pre-order-item" name="properties[PROMISE_DATE]" value="${t}" type="hidden"/>`);n.append(i),t&&n.append(d),e.ajax({type:"POST",url:"/cart/add.js",data:n.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),i.remove(),t&&d.remove()}"undefined"==typeof jQuery||parseFloat(jQuery.fn.jquery)<1.7?function(e,r){let t=document.createElement("script");t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,r())}:t.onload=function(){r()},t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}("//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",function(){(e=jQuery.noConflict(!0))(document).ready(function(){i(),n()})}):(e=jQuery)(document).ready(function(){i(),n()});let o=location.href;new MutationObserver(()=>{location.href!==o&&(o=location.href,i())}).observe(document,{subtree:!0,childList:!0})}();